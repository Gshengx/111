<template>
  <li :class="['treeNode',$attrs.showLine?'treeNode-show-line':'']" v-if="$attrs.treeItem.children.length>0">
    <div
      @click="changeTree($attrs.treeItem.key)"
      :class="['expandedIcon', $attrs.expandedKeys.includes($attrs.treeItem.key)?'close':'open']"
    ></div>
    <span :class="['treeNode-content',$attrs.selected===$attrs.treeItem.key?'selected':'']">{{$attrs.treeItem.title}}</span>
    <ul v-if="$attrs.expandedKeys.includes($attrs.treeItem.key)">
      <tree-node
        v-on="$listeners"
        v-for="item in $attrs.treeItem.children"
        :treeItem="item"
        :key="item.key"
         v-bind="$attrs"
      />
    </ul>
  </li>
  <li :class="['treeNode',$attrs.showLine?'treeNode-show-line':'']" v-else>
    <div class="expandedIcon leaf"></div>
    <span :class="['treeNode-content',$attrs.selected===$attrs.treeItem.key?'selected':'']">{{$attrs.treeItem.title}}</span>
  </li>
</template>
<script>
import TreeNode from './treeNode'
export default {
  name: 'TreeNode',
  components: {
    TreeNode
  },
  methods: {
    changeTree(key) {
      this.$emit('changeTree', key)
    }
  }
}
</script>
<style lang="less" scoped>
.treeNode {
  padding: 4px 0 4px 18px;
  position: relative;
  .treeNode-show-line:not(:last-child):before {
    position: absolute;
    left: 20px;
    width: 1px;
    height: calc(100% - 22px);
    margin: 22px 0 0;
    border-left: 1px solid #d9d9d9;
    content: ' ';
  }
  .expandedIcon {
    width: 20px;
    height: 20px;
    display: inline-block;
    &.open {
      background: url('data:image/png;base64,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')
        no-repeat;
      background-size: 100%;
    }
    &.close {
      background: url('data:image/png;base64,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')
        no-repeat;
      background-size: 100%;
    }
    &.leaf {
      background: url('data:image/png;base64,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')
        no-repeat;
      background-size: 100%;
    }
  }
  .treeNode-content {
    padding: 0 5px;
  }
  .selected {
    font-weight: bold;
  }
}
</style>